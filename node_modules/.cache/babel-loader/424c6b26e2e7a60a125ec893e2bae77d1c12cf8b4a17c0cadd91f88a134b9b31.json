{"ast":null,"code":"import{useState,useRef,useEffect}from\"react\";import{useNavigate}from'react-router-dom';import{Paper,IconButton,Box}from'@mui/material';import{Search,Mic}from'@mui/icons-material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SearchBar=()=>{const[searchTerm,setSearchTerm]=useState('');const navigate=useNavigate();const recognitionRef=useRef(null);useEffect(()=>{if('webkitSpeechRecognition'in window||'SpeechRecognition'in window){const SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;const recognition=new SpeechRecognition();recognition.lang='en-US';recognition.interimResults=false;recognition.maxAlternatives=1;recognition.onresult=event=>{const transcript=event.results[0][0].transcript;setSearchTerm(transcript);navigate(\"/search/\".concat(transcript));};recognition.onerror=event=>{alert(\"Speech recognition error: \"+event.error);};recognitionRef.current=recognition;}},[navigate]);const handleSubmit=e=>{e.preventDefault();if(searchTerm.trim()){navigate(\"/search/\".concat(searchTerm));setSearchTerm('');}};const startVoiceSearch=async()=>{if(!recognitionRef.current){alert('Voice search not supported in this browser.');return;}try{if(navigator.permissions){const permission=await navigator.permissions.query({name:'microphone'});if(permission.state==='denied'){alert('Microphone access is denied. Please allow it in your browser settings.');return;}}recognitionRef.current.start();alert('ðŸŽ¤ Listening... Please speak now.');}catch(error){alert('Microphone access failed. Please check your browser settings.');}};return/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",gap:1,children:[/*#__PURE__*/_jsxs(Paper,{component:\"form\",onSubmit:handleSubmit,sx:{display:'flex',alignItems:'center',borderRadius:'30px',pl:2,pr:1,backgroundColor:'white',boxShadow:'none',border:'px solid #ccc',width:{xs:'100%',sm:'450'}},children:[/*#__PURE__*/_jsx(\"input\",{className:\"search-bar\",placeholder:\"Search\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),style:{flex:1,border:'none',outline:'none',fontSize:'16px',backgroundColor:'transparent',padding:'10px 0'}}),/*#__PURE__*/_jsx(IconButton,{type:\"submit\",sx:{color:'red'},children:/*#__PURE__*/_jsx(Search,{})})]}),/*#__PURE__*/_jsx(IconButton,{onClick:startVoiceSearch,sx:{bgcolor:'#f1f1f1','&:hover':{bgcolor:'#e0e0e0'},borderRadius:'50%',p:1.2},children:/*#__PURE__*/_jsx(Mic,{})})]});};export default SearchBar;","map":{"version":3,"names":["useState","useRef","useEffect","useNavigate","Paper","IconButton","Box","Search","Mic","jsx","_jsx","jsxs","_jsxs","SearchBar","searchTerm","setSearchTerm","navigate","recognitionRef","window","SpeechRecognition","webkitSpeechRecognition","recognition","lang","interimResults","maxAlternatives","onresult","event","transcript","results","concat","onerror","alert","error","current","handleSubmit","e","preventDefault","trim","startVoiceSearch","navigator","permissions","permission","query","name","state","start","display","alignItems","gap","children","component","onSubmit","sx","borderRadius","pl","pr","backgroundColor","boxShadow","border","width","xs","sm","className","placeholder","value","onChange","target","style","flex","outline","fontSize","padding","type","color","onClick","bgcolor","p"],"sources":["E:/Edutainment Cinema/edutainment-cinema/src/components/SearchBar.jsx"],"sourcesContent":["import { useState, useRef, useEffect } from \"react\";\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Paper, IconButton, Box } from '@mui/material';\r\nimport { Search, Mic } from '@mui/icons-material';\r\n\r\nconst SearchBar = () => {\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const navigate = useNavigate();\r\n  const recognitionRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {\r\n      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\r\n      const recognition = new SpeechRecognition();\r\n      recognition.lang = 'en-US';\r\n      recognition.interimResults = false;\r\n      recognition.maxAlternatives = 1;\r\n\r\n      recognition.onresult = (event) => {\r\n        const transcript = event.results[0][0].transcript;\r\n        setSearchTerm(transcript);\r\n        navigate(`/search/${transcript}`);\r\n      };\r\n\r\n      recognition.onerror = (event) => {\r\n        alert(\"Speech recognition error: \" + event.error);\r\n      };\r\n\r\n      recognitionRef.current = recognition;\r\n    }\r\n  }, [navigate]);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (searchTerm.trim()) {\r\n      navigate(`/search/${searchTerm}`);\r\n      setSearchTerm('');\r\n    }\r\n  };\r\n\r\n  const startVoiceSearch = async () => {\r\n    if (!recognitionRef.current) {\r\n      alert('Voice search not supported in this browser.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      if (navigator.permissions) {\r\n        const permission = await navigator.permissions.query({ name: 'microphone' });\r\n        if (permission.state === 'denied') {\r\n          alert('Microphone access is denied. Please allow it in your browser settings.');\r\n          return;\r\n        }\r\n      }\r\n\r\n      recognitionRef.current.start();\r\n      alert('ðŸŽ¤ Listening... Please speak now.');\r\n    } catch (error) {\r\n      alert('Microphone access failed. Please check your browser settings.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box display=\"flex\" alignItems=\"center\" gap={1}>\r\n      <Paper\r\n        component=\"form\"\r\n        onSubmit={handleSubmit}\r\n        sx={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          borderRadius: '30px',\r\n          pl: 2,\r\n          pr: 1,\r\n          backgroundColor: 'white',\r\n          boxShadow: 'none',\r\n          border: 'px solid #ccc',\r\n          width: { xs: '100%', sm: '450' },\r\n        }}\r\n      >\r\n        <input\r\n          className=\"search-bar\"\r\n          placeholder=\"Search\"\r\n          value={searchTerm}\r\n          onChange={(e) => setSearchTerm(e.target.value)}\r\n          style={{\r\n            flex: 1,\r\n            border: 'none',\r\n            outline: 'none',\r\n            fontSize: '16px',\r\n            backgroundColor: 'transparent',\r\n            padding: '10px 0',\r\n          }}\r\n        />\r\n        <IconButton type=\"submit\" sx={{ color: 'red' }}>\r\n          <Search />\r\n        </IconButton>\r\n      </Paper>\r\n\r\n      <IconButton\r\n        onClick={startVoiceSearch}\r\n        sx={{\r\n          bgcolor: '#f1f1f1',\r\n          '&:hover': { bgcolor: '#e0e0e0' },\r\n          borderRadius: '50%',\r\n          p: 1.2,\r\n        }}\r\n      >\r\n        <Mic />\r\n      </IconButton>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default SearchBar;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}